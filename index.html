<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>wichat_es3b</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1><span class="image"><img src="./images/arc42-logo.png" alt="arc42"></span> wichat_es3b</h1>
<div class="details">
<span id="revnumber">version 8.2 EN,</span>
<span id="revdate">January 2023</span>
<br><span id="revremark">(based upon AsciiDoc version)</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#section-introduction-and-goals">1. Introduction and Goals</a>
<ul class="sectlevel2">
<li><a href="#_requirements_overview">1.1. Requirements Overview</a></li>
<li><a href="#_quality_goals">1.2. Quality Goals</a></li>
</ul>
</li>
<li><a href="#section-architecture-constraints">2. Architecture Constraints</a>
<ul class="sectlevel2">
<li><a href="#_technical_constraints">2.1. Technical Constraints</a></li>
<li><a href="#_convention_constraints">2.2. Convention Constraints</a></li>
<li><a href="#_organizational_constraints">2.3. Organizational Constraints</a></li>
</ul>
</li>
<li><a href="#section-context-and-scope">3. Context and Scope</a>
<ul class="sectlevel2">
<li><a href="#_business_context">3.1. Business Context</a></li>
<li><a href="#_technical_context">3.2. Technical Context</a></li>
</ul>
</li>
<li><a href="#section-solution-strategy">4. Solution Strategy</a>
<ul class="sectlevel2">
<li><a href="#_technologies_used">4.1. Technologies used:</a></li>
<li><a href="#_decissions_made_to_achieve_quality_goals">4.2. Decissions made to achieve quality goals</a></li>
<li><a href="#_relevant_organizational_decisions">4.3. Relevant organizational decisions</a></li>
<li><a href="#_testability">4.4. Testability</a></li>
</ul>
</li>
<li><a href="#section-building-block-view">5. Building Block View</a>
<ul class="sectlevel2">
<li><a href="#_whitebox_overall_system">5.1. Whitebox Overall System</a></li>
<li><a href="#_level_2">5.2. Level 2</a></li>
<li><a href="#_level_3">5.3. Level 3</a></li>
</ul>
</li>
<li><a href="#section-runtime-view">6. Runtime View</a>
<ul class="sectlevel2">
<li><a href="#_initial_question_load">6.1. Initial Question Load</a></li>
<li><a href="#_sign_up">6.2. Sign Up</a></li>
<li><a href="#_log_in">6.3. Log In</a></li>
<li><a href="#_pre_game_question_retrieval">6.4. Pre-game Question Retrieval</a></li>
<li><a href="#_play_a_game">6.5. Play a Game</a></li>
<li><a href="#_ask_llm_for_hints">6.6. ASK LLM for hints</a></li>
<li><a href="#_check_ranking">6.7. Check Ranking</a></li>
<li><a href="#_check_user_stats">6.8. Check User Stats</a></li>
<li><a href="#_ask_for_api_key">6.9. Ask for API Key</a></li>
<li><a href="#_api_access_ask_for_questions">6.10. API Access - Ask for questions</a></li>
<li><a href="#_api_access_ask_for_user_records">6.11. API Access - Ask for user records</a></li>
</ul>
</li>
<li><a href="#section-deployment-view">7. Deployment View</a>
<ul class="sectlevel2">
<li><a href="#_infrastructure_level_1">7.1. Infrastructure Level 1</a></li>
<li><a href="#_infrastructure_level_2">7.2. Infrastructure Level 2</a></li>
</ul>
</li>
<li><a href="#section-concepts">8. Cross-cutting Concepts</a>
<ul class="sectlevel2">
<li><a href="#_domain_concepts">8.1. Domain concepts</a></li>
<li><a href="#_service_oriented_architecture">8.2. Service-oriented architecture</a></li>
<li><a href="#_build_test_deploy">8.3. Build, Test, Deploy</a></li>
<li><a href="#_usability">8.4. Usability</a></li>
<li><a href="#_internationalization">8.5. Internationalization</a></li>
<li><a href="#_monitoring">8.6. Monitoring</a></li>
</ul>
</li>
<li><a href="#_architectural_decisions">9. Architectural decisions</a>
<ul class="sectlevel2">
<li><a href="#_use_empathy_models_as_large_language_models_llms_in_the_system">9.1. Use Empathy Models as Large Language Models (LLMs) in the System</a></li>
<li><a href="#_using_sparql_to_comunicate_with_wikidata">9.2. Using SPARQL to comunicate with Wikidata</a></li>
<li><a href="#_choosing_react_for_the_frontend">9.3. Choosing React for the Frontend</a></li>
<li><a href="#_using_node_js_for_backend_development">9.4. Using Node.js for Backend Development</a></li>
<li><a href="#_selecting_mongodb_atlas_for_the_database">9.5. Selecting MongoDB Atlas for the Database</a></li>
<li><a href="#_selecting_docker_for_the_deployment">9.6. Selecting Docker for the Deployment</a></li>
<li><a href="#_selecting_javascript_node_js_for_the_backend">9.7. Selecting JavaScript (Node.js) for the Backend</a></li>
<li><a href="#_implement_the_api_service_in_a_extra_container">9.8. Implement the API service in a extra container</a></li>
<li><a href="#_using_gatling_to_make_the_performance_tests">9.9. Using Gatling to make the performance tests</a></li>
<li><a href="#_using_graphana_and_prometheus_for_monitoring">9.10. Using Graphana and Prometheus for monitoring</a></li>
<li><a href="#_not_using_another_proyect_as_base">9.11. Not using another proyect as base</a></li>
<li><a href="#_implementing_an_apikey_sistem_to_the_api_service">9.12. Implementing an APIkey sistem to the API Service</a></li>
<li><a href="#_customicing_our_build_process_to_ensure_the_aplication_keeps_on_a_consistent_state">9.13. Customicing our Build process to ensure the aplication keeps on a consistent state</a></li>
<li><a href="#_azure_as_the_deployment_environment">9.14. Azure as the deployment environment</a></li>
<li><a href="#_preloading_and_normalizing_question_sets_at_application_startup">9.15. Preloading and Normalizing Question Sets at Application Startup</a></li>
</ul>
</li>
<li><a href="#section-quality-scenarios">10. Quality Requirements</a>
<ul class="sectlevel2">
<li><a href="#_quality_tree">10.1. Quality Tree</a></li>
<li><a href="#_quality_scenarios">10.2. Quality Scenarios</a></li>
</ul>
</li>
<li><a href="#section-technical-risks">11. Risks and Technical Debts</a>
<ul class="sectlevel2">
<li><a href="#_technical_debts">11.1. Technical Debts</a></li>
</ul>
</li>
<li><a href="#section-glossary">12. Glossary</a></li>
<li><a href="#section-testing">13. Testing</a>
<ul class="sectlevel2">
<li><a href="#_unit_tests_code_coverage_security_hotspots">13.1. Unit Tests, Code Coverage &amp; Security Hotspots</a></li>
<li><a href="#_e2e_tests">13.2. E2E Tests</a></li>
<li><a href="#_load_tests">13.3. Load Tests</a></li>
<li><a href="#_improvements">13.4. Improvements</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.arc42help {font-size:small; width: 14px; height: 16px; overflow: hidden; position: absolute; right: 0; padding: 2px 0 3px 2px;}
.arc42help::before {content: "?";}
.arc42help:hover {width:auto; height: auto; z-index: 100; padding: 10px;}
.arc42help:hover::before {content: "";}
@media print {
	.arc42help {display:none;}
}
</style>
<div class="paragraph">
<p><strong>About arc42</strong></p>
</div>
<div class="paragraph lead">
<p>arc42, the template for documentation of software and system architecture.</p>
</div>
<div class="paragraph">
<p>Template Version 8.2 EN. (based upon AsciiDoc version), January 2023</p>
</div>
<div class="paragraph">
<p>Created, maintained and &#169; by Dr. Peter Hruschka, Dr. Gernot Starke and contributors.
See <a href="https://arc42.org" class="bare">https://arc42.org</a>.</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-introduction-and-goals">1. Introduction and Goals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This project was created and developed by a development team composed of students from the Software Architecture course
at the School of Computer Engineering of the University of Oviedo.</p>
</div>
<div class="paragraph">
<p>Last year, the company HappySw launched a project aimed at updating an experimental online version of a quiz
competition similar to "Saber y Ganar" for the RTVE network.</p>
</div>
<div class="paragraph">
<p>This year, the company ChattySw wants to expand its functionality so that contestants can interact with the application by
receiving hints about the answers.</p>
</div>
<div class="paragraph">
<p>This is the development team:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Enol Rodríguez Hevia</strong>: <em>UO287935</em></p>
</li>
<li>
<p><strong>Alberto Fernández Azcoaga</strong>: <em>UO179637</em></p>
</li>
<li>
<p><strong>David González González</strong>: <em>UO291047</em></p>
</li>
<li>
<p><strong>Zinedine Álvarez Sais</strong>: <em>UO294258</em></p>
</li>
<li>
<p><strong>Alejandro Vega García</strong>: <em>UO294615</em></p>
</li>
<li>
<p><strong>Ignacio Llaneza Aller</strong>: <em>UO294914</em></p>
</li>
<li>
<p><strong>Daniel Uría Edroso</strong>: <em>UO282813</em></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_requirements_overview">1.1. Requirements Overview</h3>
<div class="ulist">
<ul>
<li>
<p>The system will include at least a web frontend that will display images and answers, as well as a hint system
that will allow users to receive clues about the images.</p>
</li>
<li>
<p>Users will be able to register in the system and consult the history of their participation in the system: number
of games, number of correct/failed questions, times, etc.</p>
</li>
<li>
<p>The website must be deployed and accessible via the web.</p>
</li>
<li>
<p>The question data will be automatically generated from Wikidata API.</p>
</li>
<li>
<p>Users will be able to interact with the application for each question to obtain hints. This will be achieved through
a language model (LLM) accessed via a provided API.</p>
</li>
<li>
<p>There will be a time limit to answer each question.</p>
</li>
<li>
<p>The system will provide API access to user information, which must be properly documented.</p>
</li>
<li>
<p>The system will also provide API access to the generated questions.</p>
</li>
<li>
<p>Each question will have one correct answer and several incorrect (distracting) answers. All answers will be genereated
automatically.</p>
</li>
<li>
<p>A technique must be implemented to generate hints from Wikidata data while mitigating incorrect
answers and hallucinations during interactions.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_quality_goals">1.2. Quality Goals</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Priority</th>
<th class="tableblock halign-left valign-top">Quality Goal</th>
<th class="tableblock halign-left valign-top">Expectations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>1</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Usability</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>All people should be able to enjoy and finish with success the application within a reasonable
limit of time</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>2</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Maintainability</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>The application should be easy to maintain, with clear, well-documented code and modular
design that allows for future updates.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>3</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Accessibility</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>The application should be usable by people with various disabilities, meeting common
accessibility standards</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>4</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Availability</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>While the application initially aimed for a 99.9% availability target, this level of uptime
typically requires production-grade infrastructure, including redundancy, autoscaling, and service-level agreements (SLAs)
provided by cloud providers.
Since this project is hosted on Microsoft Azure using student credits, it does not benefit from guaranteed SLAs or high-availability
configurations. Therefore, a more realistic expectation for availability is in the range of 99.0% to 99.5%, which allows for occasional
downtime due to maintenance, restarts, or limited resource allocations in the free tier.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>5</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Reliability</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>The application should operate consistently and recover quickly from failures</em></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role/Name</th>
<th class="tableblock halign-left valign-top">Contact</th>
<th class="tableblock halign-left valign-top">Expectations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Teachers</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Jose Emilio Labra, Pablo González, Irene Cid, Diego Martín</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The teachers are the supervisors of the
team and will help the team and should be accessible if the team needs them.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Students</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Enol Rodríguez, Alberto Fernández, David González, Zinedine Álvarez, Alejandro Vega
Ignacio Llaneza, Daniel Uría</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>They are the development team. They should develop the application with success and
learn through the process of the subject</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Users</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Anyone who interacts with the application</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They should be able to use the application without any
problems and enjoy the experience.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>RTVE</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>RTVE</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They are the primary stakeholders in the application, as they commissioned it to allow their
viewers to use it.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-architecture-constraints">2. Architecture Constraints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_technical_constraints">2.1. Technical Constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wikidata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All visual and textual content related to questions must be automatically created using structured data from Wikidata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Git and GitHub</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The project will have version control through Git. The repository will be in GitHub, where issues, "project" and wiki will be useful for project tracking.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application must have a bot chat to interact with it. The chat have to be made by an LLM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The complete system must be deployed on a public server or cloud platform, ensuring that users can access and use the application from anywhere via a URL, not just in local or development environments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The deployed system must include monitoring and observability mechanisms, such as performance logging, error tracking, and health checks, to detect issues early and ensure system reliability over time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automated Testing and Integration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The project must adopt DevOps practices, including unit and integration testing, code linting, and automated CI/CD pipelines to ensure safe, consistent deployments and maintainable code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documented REST API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A unified, well-documented RESTful API must expose both user data (e.g., registration, scores, game history) and quiz data (e.g., questions, answers, metadata).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_convention_constraints">2.2. Convention Constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arc42</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The project documentation will be done following the Arc42 template. Arc42 is a framework for documenting software architecture that provides a clear and structured approach to communicate architectural decisions, components, and requirements.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The project deadline is May 5th, but there will be sprints during the process. Important dates are February 24th for the first verion of de documentation, March 17th for a prototype of the application, and April 7th for an almost finished application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We follow Clean Code principles to ensure maintainability, making the code easy to read, modify, and extend over time.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_organizational_constraints">2.3. Organizational Constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The team is made up of seven members who never worked together. The members will reunite at least one time per week to catch up on work and establish next objectives.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Technical knowledge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The development team consists of students who are beginners with the technologies used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testing: The team has limited experience with automated testing, which may impact the speed and coverage of testing during development.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-context-and-scope">3. Context and Scope</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_business_context">3.1. Business Context</h3>
<div class="imageblock text-center">
<div class="content">
<img src="./images/final-business-context-diagram-3.0.png" alt="Businesss Context diagram">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. WICHAT System</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Communication partners</th>
<th class="tableblock halign-left valign-top">Inputs</th>
<th class="tableblock halign-left valign-top">Outputs</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>WICHAT</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data from Wikidata, Hints from LLM&#8217;s, User Answers, User Requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Questions to User, Feedback to User, Queries to Wikidata, Requests to LLM&#8217;s</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>USER</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Answer questions, request hints</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question Presentation, Answer Feedback, Hint Presentation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>WIKIDATA</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data queries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question and Answer Data (JSON format)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>LLM&#8217;S</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hint Generation Request using a text prompt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generated hints</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_technical_context">3.2. Technical Context</h3>
<div class="paragraph">
<p><span class="image"><img src="./images/final-technical-context-diagram-3.1.png" alt="Technical Context diagram"></span></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Communication partners</th>
<th class="tableblock halign-left valign-top">Inputs</th>
<th class="tableblock halign-left valign-top">Outputs</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>wikiquestionservice</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question data-index</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Questions and answers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>apiservice</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backend data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>authservice</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Login info</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User info (account page)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>userservice</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New user info</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User info (account page)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>statsservice</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User&#8217;s history and stats</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>llmservice</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User text inputs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hints about the question</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Users</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Questions and possible answers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interaction to log in and answer to questions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Wikidata</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request for question data with category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question sources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>MongoDB</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAW data for questions, answers, and user information</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Structured data of questions answers, and user information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Webapp</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User inputs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Browser outputs</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-solution-strategy">4. Solution Strategy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We develop an application of questions, like 'Saber y Ganar', in which the main objetive is to comunicate with a chatbot to obtain some hints for answer correctly each question.
Users can register to play and save their game statistics, they will also to be able to consult a ranking with the most remarkable games of all users
.</p>
</div>
<div class="sect2">
<h3 id="_technologies_used">4.1. Technologies used:</h3>
<div class="ulist">
<ul>
<li>
<p><strong>JavaScript</strong>: JavaScript is a very flexible programming language widely used in software development.</p>
</li>
<li>
<p><strong>Node.js</strong>: Node.js is used to create server-side applications with JavaScript, so we decided to use it to make the back-end of our web app.</p>
</li>
<li>
<p><strong>MongoDB</strong>: MongoDB is an open-source NoSQL database that uses a document-based data model for information storage and retrieval. We use MongoDB Atlas for running a Mongo database in the cloud.</p>
</li>
<li>
<p><strong>React</strong>: It&#8217;s a framework widely used to create user interface components. Chosen for the large volume of documentation.</p>
</li>
<li>
<p><strong>Wikidata</strong>: An open, collaborative database that stores structured information, allowing both humans and machines to access, share, and reuse knowledge efficiently.</p>
</li>
<li>
<p><strong>Microsoft Azure</strong>: It&#8217;s a cloud computing platform and set of services provided by Microsoft that allows us to deploy, manage , and scale online applications and services.</p>
</li>
<li>
<p><strong>Asciidoc</strong>: It&#8217;s a lightweight markup language for writing documentation in plain text, which can be converted to formats like HTML, PDF. We’ll use it for creating and managing our project’s documentation efficiently.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_decissions_made_to_achieve_quality_goals">4.2. Decissions made to achieve quality goals</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Usability</strong>: Although usability is already guaranteed by the developers of the base application, we will try to make interaction with the chatbot simple so that it remains that way.</p>
</li>
<li>
<p><strong>Maintainability</strong>: The entire team is committed to making clean and well-structured code, along with adequate documentation to enable good maintainability of the project.</p>
</li>
<li>
<p><strong>Accessibility</strong>: In the event of making any changes that affect the accessibility of the application, we will ensure that it complies with the appropriate accessibility standards.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_relevant_organizational_decisions">4.3. Relevant organizational decisions</h3>
<div class="ulist">
<ul>
<li>
<p>Communication between team members is mostly made through Github, using issues to create and assign tasks, Whatsapp, to ask the rest of the team for help if needed for quick advice, and meetings.</p>
</li>
<li>
<p>For the tasks to be performed, we have decided to implement an author-reviewer mechanic to avoid a single person being in charge of a part of the application and minimize large avoidable errors.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_testability">4.4. Testability</h3>
<div class="paragraph">
<p>To ensure the correct functionality of the application, we performed extensive testing.
This included load testing to evaluate performance under high demand,
and coverage testing to verify that all critical parts of the code are properly tested.
These efforts help guarantee a stable and reliable system.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-building-block-view">5. Building Block View</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_whitebox_overall_system">5.1. Whitebox Overall System</h3>
<div class="paragraph">
<p><span class="image"><img src="./images/5_Overview_diagram.png" alt="5 Overview diagram"></span></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Motivation</dt>
<dd>
<p>This view describes the decomposition of the WIChat system into several building blocks, focusing on the web application, external API interactions, and data handling, in order to provide an interactive and efficient user experience.</p>
</dd>
<dt class="hdlist1">Contained Building Blocks</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Webapp</strong>: Manages the user interface and game logic.</p>
</li>
<li>
<p><strong>User Authentication Service</strong>: Handles user authentication by validating login credentials and issuing a JWT token upon successful verification.</p>
</li>
<li>
<p><strong>User Stats Service</strong>: Handles user stats about the games played.</p>
</li>
<li>
<p><strong>User Service</strong>: Handles user registration and manages API key generation and validation for secure access.</p>
</li>
<li>
<p><strong>Question Service</strong>: Generates and retrieves questions.</p>
</li>
<li>
<p><strong>LLM Service</strong>: Provides hints for users during the quiz.</p>
</li>
<li>
<p><strong>API Gateway</strong>: Routes requests between the frontend and backend.</p>
</li>
<li>
<p><strong>Database</strong>: Stores user data and question-related metadata.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Important Interfaces</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>User API</strong>: Allows interaction with user data.</p>
</li>
<li>
<p><strong>Question API</strong>: Provides access to questions and answers.</p>
</li>
<li>
<p><strong>Hint API</strong>: Offers hints for the questions.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Both Question and Hint API will make use of external services (SONAR and Wikidata), and therefore will use their APIs.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Responsibility</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Webapp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Main entry point for users. It renders the graphical interface and executes game logic in client.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Central request router between the Webapp and backend services.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates and retrieves system questions, based on catrgory and difficulty level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Authentication Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verifies login credentials and issues secure tokens for authenticated access.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registers new users and manages the lifecycle of API keys for client authorization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Stats Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collects and updates user performance data from played games.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hint Generation Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates hints for questions based on difficulty level, by means of a LLM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stores user information and questions. Recieves requests to store questions and manages credentials.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_level_2">5.2. Level 2</h3>
<div class="sect3">
<h4 id="_webapp">5.2.1. WebApp</h4>
<div class="paragraph">
<p>Composed of modules to handle the interface, game logic and API communication.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/5.2_WebappDiagram.png" alt="5.2 WebappDiagram"></span></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Responsibility</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UI Renderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders interface elements.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Game</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls application logic rules.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PlayView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls the Game.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manages calls to backend services.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_question_service">5.2.2. Question Service</h4>
<div class="paragraph">
<p>Decomposed into modules for both managing questions and storing data.
<span class="image"><img src="./images/5.2_QuestionServiceDiagram.png" alt="5.2 QuestionServiceDiagram"></span></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Responsibility</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question Repository</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accesses and manipulates data in the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Category Handler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates questions for the specified categories.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WikiData Fetcher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Queries WikiData for relevant information.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_level_3">5.3. Level 3</h3>
<div class="sect3">
<h4 id="_webapp_api_client">5.3.1. Webapp - API Client</h4>
<div class="paragraph">
<p>Encapsulates comunication with backend services.
<span class="image"><img src="./images/5.2_APIClientDiagram.png" alt="5.2 APIClientDiagram"></span></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Responsibility</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UserAuth Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manages user authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieves questions from the backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hint Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requests hints from the corresponding service.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-runtime-view">6. Runtime View</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_initial_question_load">6.1. Initial Question Load</h3>
<div class="paragraph">
<p>When the application runs, Wiki Question Service checks the number of questions of each of the five available thematics in database. There are two posible stages:
<strong>A thematic has not enough questions:</strong>
If a thematic does not reach a minimum of 60 questions in database, the service will use Wikidata API and SPARQL to generate as many questions as needed, and stores them in database.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Initial%20Question%20Load.svg" alt="Initial Question Load" width="689" height="363">
</div>
</div>
<div class="paragraph">
<p><strong>A thematic has enough questions:</strong>
If there are already enough questions, the service substitutes 10 questions of that tematic with another 10 different questions, in order to ensure their variety.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Initial%20Question%20Load.svg" alt="Initial Question Load" width="712" height="363">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sign_up">6.2. Sign Up</h3>
<div class="paragraph">
<p>A user wants to create a new account. The user introduces the required information and clicks the "Sign Up" button. The system validates the information and creates a new account. If all the process runs correctly, the system displays a success message</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/SignIn%20diagram.svg" alt="SignIn diagram" width="904" height="459">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_log_in">6.3. Log In</h3>
<div class="paragraph">
<p>A user wants to log in into the application. The user introduces the required information and clicks the "Log In" button. The system validates the information and if the user had already an account, redirects them to the main page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/LogIn%20diagram.svg" alt="LogIn diagram" width="804" height="501">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pre_game_question_retrieval">6.4. Pre-game Question Retrieval</h3>
<div class="paragraph">
<p>When a user asks to start a new game, the system is expected to retrieve 10/20/30 questions of the chosen thematics from its database, depending on the game mode. This will be done before starting the game.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/New%20question.svg" alt="New question" width="761" height="416">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_play_a_game">6.5. Play a Game</h3>
<div class="paragraph">
<p>Once the questions are retrieved from the database (previous diagram), the game starts. A user will send an answer to each of the questions of the game. The system validates them and computes the score depending on the time spent in answering the question. At the end of the game, the front-end sends a request to save user statistics in database.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Play%20a%20game.svg" alt="Play a game" width="778" height="459">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ask_llm_for_hints">6.6. ASK LLM for hints</h3>
<div class="paragraph">
<p>A user wants to get a new clue for the current question. The request is redirected to the LLMService that handles the connection with the real LLM.
Once it is processed, it is displayed in the game front-end.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/New%20clue.svg" alt="New clue" width="893" height="459">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_ranking">6.7. Check Ranking</h3>
<div class="paragraph">
<p>A user asks to see the ranking of the players with the 10 most high scores in a single game. The request is processed by the Stats Service and is returned and displayed to the user.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/User%20Stats.svg" alt="User Stats" width="634" height="416">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_user_stats">6.8. Check User Stats</h3>
<div class="paragraph">
<p>A user asks to see another user&#8217;s game statistics (or their own). The request is then redirected to the stats service, which processes the request and sends a response for the specific user. This data is displayed in the profile view.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/User%20Stats.svg" alt="User Stats" width="964" height="416">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ask_for_api_key">6.9. Ask for API Key</h3>
<div class="paragraph">
<p>A developer user requests for a private API Key in order to integrate our services in their applications. The user provides an email and the system checks if it is registered in its database. If it is not, it displays an API key for the user to store in a safe place.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Ask%20for%20API%20Key.svg" alt="Ask for API Key" width="1130" height="459">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_api_access_ask_for_questions">6.10. API Access - Ask for questions</h3>
<div class="paragraph">
<p>The user wants to use the API in order to get game questions in return. The system processes the request and returns the questions to the user.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/API%20Access%20-%20Questions.svg" alt="API Access   Questions" width="946" height="416">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_api_access_ask_for_user_records">6.11. API Access - Ask for user records</h3>
<div class="paragraph">
<p>A user wants to check the stats of a user through the API. The system loads the stats of the user asked for.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/API%20Access%20-%20Records.svg" alt="API Access   Records" width="891" height="416">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-deployment-view">7. Deployment View</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_infrastructure_level_1">7.1. Infrastructure Level 1</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Motivation</dt>
<dd>
<p>The system is deployed on a virtual machine hosted on Microsoft Azure. This choice ensures high availability, simplified scaling, and seamless integration with Azure services, meeting the performance, maintainability, and security requirements of the application.</p>
</dd>
<dt class="hdlist1">Quality and/or Performance Features</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Portability:</strong> Docker containers ensure consistent execution across various environments.</p>
</li>
<li>
<p><strong>Maintainability:</strong> Isolation of services enables independent updates and minimizes downtime.</p>
</li>
<li>
<p><strong>Security:</strong> Azure provides robust security features and network isolation, protecting both data and services.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Mapping of Building Blocks to Infrastructure</dt>
<dd>
<p>The deployment maps the following building blocks:</p>
<div class="ulist">
<ul>
<li>
<p><strong>User Interface:</strong> Delivered via a web application hosted on an Azure virtual machine.</p>
</li>
<li>
<p><strong>Services:</strong> Packaged as Docker containers within the Azure VM, each responsible for distinct functionalities (e.g., user management or question generation).</p>
</li>
<li>
<p><strong>Persistence Layer:</strong> A dedicated container hosting the database, accessible only to internal services.</p>
</li>
<li>
<p><strong>External Services:</strong> Secure connections are established to external APIs (e.g., Wikidata) to fetch dynamic content.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Below is a diagram summarizing the infrastructure distribution:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/diagram-7_1.png" alt="diagram 7 1"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_infrastructure_level_2">7.2. Infrastructure Level 2</h3>
<div class="paragraph">
<p>This section provides a detailed view of selected infrastructure elements from Level 1.</p>
</div>
<div class="sect3">
<h4 id="_azure_virtual_machine_hosting_the_web_application">7.2.1. Azure Virtual Machine Hosting the Web Application</h4>
<div class="paragraph">
<p>This element represents the Azure virtual machine that hosts the web application. The VM runs a supported operating system (e.g., Ubuntu) and includes the Docker engine to manage containerized services.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/diagram-7_2.png" alt="diagram 7 2"></span></p>
</div>
<div class="paragraph">
<p><em>Explanation</em>:
The Azure VM was selected for its reliability and integrated security features. Hosting the web application in a Docker container on Azure facilitates quick scaling and streamlined management while leveraging Azure’s global network infrastructure.</p>
</div>
</div>
<div class="sect3">
<h4 id="_docker_container_environment">7.2.2. Docker Container Environment</h4>
<div class="paragraph">
<p>Within the Azure VM, the Docker engine orchestrates several containers, each encapsulating a service. This environment supports modular development and independent scalability.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/diagram-7_3.png" alt="diagram 7 3"></span></p>
</div>
<div class="paragraph">
<p><em>Explanation</em>:
The Docker container environment isolates each service, enabling independent updates and robust fault tolerance. Internal communication is handled through the Docker network, ensuring efficient and secure interactions between services.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Building Block</strong></th>
<th class="tableblock halign-left valign-top"><strong>Infrastructure Mapping</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web Application (UI)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runs in the Web Application Container on the Azure VM, accessible to users via HTTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runs in an exposed Docker container. Requires an API key for doing requests, ensuring secure communication with the web application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Services (authservice, userservice, statsservice, llmservice, wikiquestionservice)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each service is packaged in its own Docker container within the Docker Engine on the Azure VM, communicating over an isolated internal network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gateway Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Acts as a single entry point for client requests. Deployed in its own Docker container, it routes traffic to internal services.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Persistence(mongodb)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployed as a dedicated container, ensuring secure data storage and access limited to internal services.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring (Prometheus, Grafana)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployed as separate containers. Prometheus collects metrics from services; Grafana provides dashboards for visualization and analysis. Both are accessible internally for observability.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-concepts">8. Cross-cutting Concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_domain_concepts">8.1. Domain concepts</h3>
<div class="sect3">
<h4 id="_domain_model">8.1.1. Domain model</h4>
<div class="paragraph">
<p><span class="image"><img src="./images/diagram-8_1.png" alt="diagram 8 1"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_domain_description">8.1.2. Domain description</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents a user of the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UserRecord</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stores all the game sessions in which a user has participated and keeps their total score.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GameSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents a game session played by a user, storing all the questions, the choices made, and the total score.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents questions shown to the user by the application and stores the wrong choices, correct choices, and the text that is displayed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choice</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the choices that the user can make when answering a question. It stores the text of the choice and indicates if it was selected by the user.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_service_oriented_architecture">8.2. Service-oriented architecture</h3>
<div class="paragraph">
<p>We have decided that our architecture will be based on microservices,but as the services are not fully decoupled at the data level it&#8217;s more accurate a service-oriented architecture, which means that every part of the aplication will be divided in a service that performs a specific function. The services can communicate witch eachother using their repective APIs or via the shared database.</p>
</div>
</div>
<div class="sect2">
<h3 id="_build_test_deploy">8.3. Build, Test, Deploy</h3>
<div class="paragraph">
<p>The project follows a CI/CD pipeline that automates build, test, and deployment processes using GitHub Actions. This ensures that the application is always up-to-date and functioning correctly.</p>
</div>
<div class="paragraph">
<p>We have performed both coverage testing to ensure that key parts of the application logic are tested, and load testing to verify performance under heavy use. These tests help ensure a stable and reliable system.</p>
</div>
<div class="paragraph">
<p>Deployment is handled in two environments: locally using Docker containers for development and testing purposes, and in the cloud via Microsoft Azure for production deployment. Each service runs in a container, and the frontend is exposed through a public IP address.</p>
</div>
</div>
<div class="sect2">
<h3 id="_usability">8.4. Usability</h3>
<div class="paragraph">
<p>Usability is crucial for any application, as it directly impacts user interaction efficiency. To ensure our app’s usability, we conducted extensive user research, leading to an intuitive interface design. Employing a user-centric approach throughout development, we prioritized user experience, facilitating easy navigation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_internationalization">8.5. Internationalization</h3>
<div class="paragraph">
<p>We have implemented internationalization (i18n) to support both English and Spanish.
This includes not only the user interface but also the question content, ensuring that the entire experience is localized based on the user&#8217;s language preference.</p>
</div>
</div>
<div class="sect2">
<h3 id="_monitoring">8.6. Monitoring</h3>
<div class="paragraph">
<p>The application includes a monitoring setup using Prometheus and Grafana. Prometheus collects real-time metrics from different services, such as request rates, response times, and error counts. These metrics are visualized in Grafana through custom dashboards, which help the development team track performance and availability.</p>
</div>
<div class="paragraph">
<p>This setup allows early detection of anomalies or bottlenecks, ensuring a stable and responsive user experience.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architectural_decisions">9. Architectural decisions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_use_empathy_models_as_large_language_models_llms_in_the_system">9.1. Use Empathy Models as Large Language Models (LLMs) in the System</h3>
<div class="paragraph">
<p>We need to integrate a Large Language Model (LLM) into our question-and-answer application to generate hints during the user&#8217;s turn. Therefore, we decided to use the LLM models associated with the API key provided by the teachers.</p>
</div>
<div class="paragraph">
<p><strong><em>Decision:</em></strong><br></p>
</div>
<div class="paragraph">
<p>It was decided to integrate Large Language Models (LLMs) through external APIs to generate real-time responses and hints.<br>
The selected models are Mistral-7B-Instruct-v0.3 and Qwen2.5-Coder-7B-Instruct, both from Empathy AI
because it is the API key that has been provided to us and allows us to access both easily with the same API key, improving our resilience in case of external failure by any of the models .</p>
</div>
<div class="paragraph">
<p><strong>Consequences</strong><br></p>
</div>
<div class="paragraph">
<p>Consequently, we need a structured knowledge source, in our case Wikidata,
from which we will extract and process the information to provide it to the user and also we must learn to create effective prompts.</p>
</div>
<div class="paragraph">
<p>To know more about Prompt Engineering <a href="https://github.com/Arquisoft/wichat_es3b/issues/4">Issue #4</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_sparql_to_comunicate_with_wikidata">9.2. Using SPARQL to comunicate with Wikidata</h3>
<div class="paragraph">
<p>We needed to use Wikidata, so we chose SPARQL to construct queries and retrieve the associated information.<br>
Decision made in <a href="https://github.com/Arquisoft/wichat_es3b/wiki/Acta-2-%E2%80%90-10-02-2025">Acta 2 ‐ 10 02 2025</a>.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Wikidata is an open knowledge base, and SPARQL is the most widely used method for retrieving information from it.</p>
</li>
<li>
<p>It enables flexible integrations with our backend systems.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Optimal performance requires expertise in SPARQL query optimization.</p>
</li>
<li>
<p>Data updates are dependent on the Wikidata community.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To learn basic concepts about Wikidata and SPARQL <a href="https://github.com/Arquisoft/wichat_es3b/issues/6">Issue #6</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_choosing_react_for_the_frontend">9.3. Choosing React for the Frontend</h3>
<div class="paragraph">
<p>We require an efficient framework for frontend development so we decided to utilize
React for the user interface.<br>
Decision made in <a href="https://github.com/Arquisoft/wichat_es3b/wiki/Acta-2-%E2%80%90-10-02-2025">Acta 2 ‐ 10 02 2025</a>.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>React&#8217;s declarative nature facilitates the construction of interactive user interfaces.</p>
</li>
<li>
<p>The integration of React with Wikidata is straightforward and user-friendly, simplifying data management and display.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a consequence, most part of the team will require React training because it is a new technology for many of us.</p>
</div>
<div class="paragraph">
<p>To learn basic concepts about React <a href="https://github.com/Arquisoft/wichat_es3b/issues/7">Issue #7</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_node_js_for_backend_development">9.4. Using Node.js for Backend Development</h3>
<div class="paragraph">
<p>We require an efficient and scalable technology for the backend so we will
utilize Node.js to solve this problem.<br>
Decision made in <a href="https://github.com/Arquisoft/wichat_es3b/wiki/Acta-2-%E2%80%90-10-02-2025">Acta 2 ‐ 10 02 2025</a>.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong><br>
Node.js is highly efficient for asynchronous and high-traffic applications.
Furthermore, it is a great opportunity for many of us to learn how to use this important technology in the software development world.</p>
</div>
<div class="paragraph">
<p>New knowledge about Node.js <a href="https://github.com/Arquisoft/wichat_es3b/issues/3">Issue #3</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_selecting_mongodb_atlas_for_the_database">9.5. Selecting MongoDB Atlas for the Database</h3>
<div class="paragraph">
<p>Due to the requirement for flexible storage of structured and unstructured data,
we have chosen a NoSQL database over SQL. <br>
Decision made in <a href="https://github.com/Arquisoft/wichat_es3b/wiki/Acta-2-%E2%80%90-10-02-2025">Acta 2 ‐ 10 02 2025</a>.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Makes easier the storage of semi-structured data in JSON format.</p>
</li>
<li>
<p>It works very well with Node.js and is highly scalable.</p>
</li>
<li>
<p>With the online version of MongoDB we can easily manage the database and scale it as needed.</p>
</li>
<li>
<p>The online version increases disponibility and reduces the need for maintenance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong><br>
Query optimization may be required for handling large data volumes. Although we
have had some exposure to NoSQL databases, further training and development in this area will be necessary to optimize their usage.
If we need a bigger version of the database, we will have to pay for it.</p>
</div>
<div class="paragraph">
<p>To learn basic concepts about MongoDb and practice examples <a href="https://github.com/Arquisoft/wichat_es3b/issues/9">Issue #9</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_selecting_docker_for_the_deployment">9.6. Selecting Docker for the Deployment</h3>
<div class="paragraph">
<p>Considering the need for a dependable, scalable, and efficient deployment process, we chose Docker to containerize
our services. Docker allows us to define and package all the components of our application in a consistent and
repeatable manner, making it easy to deploy across various environments without issues.<br></p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Docker ensures a consistent environment for all our services, making sure they run the same way in both
development and production. This greatly reduces potential problems that might arise due to configuration differences.</p>
</li>
<li>
<p>By using Docker Compose, we can define all the services in a single file, making it simpler to orchestrate and scale
the application as needed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>To make sure we’re deploying and troubleshooting containers effectively, we&#8217;ll need a solid understanding of Docker-specific tools (like Docker Compose) and networking.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_selecting_javascript_node_js_for_the_backend">9.7. Selecting JavaScript (Node.js) for the Backend</h3>
<div class="paragraph">
<p>We chose JavaScript (Node.js) for the backend because using the same language on both
the frontend and backend simplifies development and improves team collaboration.<br>
Decision made in <a href="https://github.com/Arquisoft/wichat_es3b/wiki/Acta-2-%E2%80%90-10-02-2025">Acta 2 ‐ 10 02 2025</a>.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Unified Language: Using JavaScript across the stack makes development smoother and faster.</p>
</li>
<li>
<p>Rich Ecosystem: With npm, we have access to a vast library of packages that speed up development.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Learning Curve: Developers will need to get comfortable with asynchronous programming and patterns like Promises or async/await.</p>
</li>
<li>
<p>Maintenance: While efficient, Node.js requires ongoing monitoring to maintain performance, especially as the app scales.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_implement_the_api_service_in_a_extra_container">9.8. Implement the API service in a extra container</h3>
<div class="paragraph">
<p>We need to implement an API service to provide access to user data and the questions generated. To achieve this, we will deploy it as a separate service in its own container.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Microservice independence: By isolating the API service in its own container, we can independently scale and manage it without affecting other services.</p>
</li>
<li>
<p>Easier access control: This separation allows for more granular access control and security measures, ensuring that only authorized services can interact with the API.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>More complicated deployment: We need to ensure that the API service is properly configured and can communicate with other services in the system.</p>
</li>
<li>
<p>Increased complexity: This separation may introduce additional complexity in terms of service discovery and inter-service communication.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_using_gatling_to_make_the_performance_tests">9.9. Using Gatling to make the performance tests</h3>
<div class="paragraph">
<p>We need to ensure that our application can handle a large number of concurrent users and requests. To achieve this, we will use Gatling to perform performance tests on our system.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Scalability: Gatling is designed to simulate a large number of users and can easily scale to test the performance of our application under heavy load.</p>
</li>
<li>
<p>Guide: we already have a guide in the course documentation that explains how to use Gatling for performance testing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Learning curve: Some team members may need to familiarize themselves with Gatling and its configuration.</p>
</li>
<li>
<p>Difficulty in interpreting results: Analyzing the results of performance tests can be complex, and we need to ensure that we have the necessary expertise to interpret the data correctly.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_using_graphana_and_prometheus_for_monitoring">9.10. Using Graphana and Prometheus for monitoring</h3>
<div class="paragraph">
<p>We need to monitor our application to ensure its performance and reliability. To achieve this, we will use Prometheus for data collection and Graphana for visualization.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open-source: Both Prometheus and Graphana are open-source tools, which means we can use them without incurring additional costs.</p>
</li>
<li>
<p>Flexibility: Prometheus allows us to collect metrics from various sources, and Graphana provides a powerful visualization layer to analyze the data.</p>
</li>
<li>
<p>Guide: we already have a guide in the course documentation that explains how to use Prometheus and Graphana for monitoring.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong>
- Learning curve: Some team members may need to familiarize themselves with Prometheus and Graphana and their configuration.
- Integration: We need to ensure that works on local and remote environments, which may require additional configuration and testing.</p>
</div>
</div>
<div class="sect2">
<h3 id="_not_using_another_proyect_as_base">9.11. Not using another proyect as base</h3>
<div class="paragraph">
<p>Although we could have used an existing project as the foundation for our application, we chose to build it from scratch and instead use other repositories only as references.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong>
- Customization: By starting from scratch, we can tailor the application to our specific needs and requirements without being constrained by the limitations of an existing project.
- Familiarity: It&#8217;s easier for the team to understand and maintain the codebase when we build it from the ground up, rather than trying to decipher someone else&#8217;s code.</p>
</div>
<div class="paragraph">
<p><strong>Consequences</strong>
- Higher initial effort: Starting from scratch requires more time and effort to set up the project and implement the necessary features.</p>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_an_apikey_sistem_to_the_api_service">9.12. Implementing an APIkey sistem to the API Service</h3>
<div class="paragraph">
<p>We decided to implement an authentication system for the API service to ensure that only authorized users can access the data and functionalities it provides. Authentication is based on the user&#8217;s email, which is stored separately from gameplay data to avoid exposing sensitive information and to allow non-player users to access the API securely.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong>
- Security: By implementing an API key system, we can control access to the API and prevent unauthorized users from accessing sensitive data or services.
- Improving the overall value of the API: By requiring an API key, we can track usage and monitor performance, which can help us identify potential issues and improve the overall quality of the API.</p>
</div>
<div class="paragraph">
<p><strong>Consequences</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Increased complexity: Implementing an API key system adds complexity to the API service, as we need to manage the generation, distribution (frontend), and validation of API keys.</p>
</li>
<li>
<p>User experience: Requiring an API key may create additional friction for users, as they need to obtain and manage the key to access the API.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_customicing_our_build_process_to_ensure_the_aplication_keeps_on_a_consistent_state">9.13. Customicing our Build process to ensure the aplication keeps on a consistent state</h3>
<div class="paragraph">
<p>Due to errors encountered during the deployment process, we decided to customize our build pipeline to ensure the application remains in a consistent state and that all tests are successfully completed before deploying to production. The default configuration only runs unit tests, but we also require all end-to-end tests to pass before any production deployment.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Quality assurance: By customizing the build process to include end-to-end tests, we can ensure that the application is functioning correctly and that all components are working together as expected.</p>
</li>
<li>
<p>Consistency: This approach helps maintain a consistent state across different environments, reducing the risk of deployment issues and ensuring that the application behaves as expected in production.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Increased complexity: Customizing the build process adds complexity to the deployment pipeline, as we need to ensure that all tests are properly configured and executed.</p>
</li>
<li>
<p>Longer github actions duration: Including end-to-end tests in the build process may increase the time it takes to complete the build and deployment process, which could impact the speed of development and deployment cycles.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_azure_as_the_deployment_environment">9.14. Azure as the deployment environment</h3>
<div class="paragraph">
<p>We decided to use Azure as the deployment environment for our application.</p>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Familiarity: All the team members have some experience with Azure due to SEW, which will make it easier to set up and manage the deployment process.</p>
</li>
<li>
<p>MVs customization: Azure allows us to customize the deployment process and configure the environment to meet our specific needs, which is important for our application.</p>
</li>
<li>
<p>Scalability: Azure provides a scalable infrastructure that can handle the expected load of our application, ensuring that it can grow as needed.</p>
</li>
<li>
<p>Free students plan: Azure offers a free plan for students, which allows us to deploy our application without incurring additional costs.</p>
</li>
<li>
<p>Disponibility: Azure provides a reliable and highly available infrastructure, ensuring that our application remains accessible to users at all times.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Consequences</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Limited cost: The free plan has limitations on resources and usage, which may impact the performance and scalability of our application.</p>
</li>
<li>
<p>Limited exprience: we are no experts in Azure, so we may encounter challenges during the deployment process. However, we can rely on the knowledge gained from SEW and the documentation provided by Azure to overcome these challenges.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_preloading_and_normalizing_question_sets_at_application_startup">9.15. Preloading and Normalizing Question Sets at Application Startup</h3>
<div class="paragraph">
<p>To ensure a consistent and balanced number of questions per category in the application, we decided to preload and normalize the question sets during application startup.</p>
</div>
<div class="paragraph">
<p>At the moment the application starts, each question category will be processed to ensure exactly 60 questions are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a category contains fewer than 60 questions, new ones will be generated to reach 60.</p>
</li>
<li>
<p>If a category contains more than 60 questions, 4 from each theme will be removed at random and replaced with 4 newly generated ones.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Justification</strong></p>
</div>
<div class="paragraph">
<p>This approach ensures that all categories offer a uniform and fair gameplay experience by maintaining a consistent number of questions, avoiding categories with too few or too many.
It also guarantees regular content refreshment in overpopulated categories to prevent repeated questions and improve user engagement.
Additionally, centralizing this logic at startup simplifies runtime operations and reduces delays during the user&#8217;s turn.</p>
</div>
<div class="paragraph">
<p><strong>Consequences</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>We must implement logic to identify under and overpopulated categories and interface this with the question generation module.</p>
</li>
<li>
<p>Startup time may slightly increase, especially if many questions need to be generated.</p>
</li>
<li>
<p>No changes are required to the current data model or storage structure.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-quality-scenarios">10. Quality Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to make Wichat a satisfactory final product, we find it crucial to set some quality requirements to live up with. These aspects are to influence architectural decisions and hence include some measurable features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Usability:</strong> Intuitive and easy interfaces, reducing the volume of help needed in order to use the application.</p>
</li>
<li>
<p><strong>Mantainability:</strong> Long-term enhancement support requiring minimal effort.</p>
</li>
<li>
<p><strong>Accesibility:</strong> Make the application usable to people with diverse disabilities.</p>
</li>
<li>
<p><strong>Reliability:</strong> Contistency and easy recovering.</p>
</li>
<li>
<p><strong>Availability:</strong> Handling increased traffic without compromising performance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Moreover, some other non-functional requirements, while less prioritary, are still relevant:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Performance:</strong> A smooth user experience, ensuring responsiveness and minimal delays.</p>
</li>
<li>
<p><strong>Security:</strong> Basic measures, even if sensitive data is not handled.</p>
</li>
<li>
<p><strong>Compatibility:</strong> Accesibility across diferent devices and screen sizes.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_quality_tree">10.1. Quality Tree</h3>
<div class="imageblock">
<div class="content">
<img src="./images/diagrama_escenarios_calidad.jpg" alt="Diagrama de escenarios de calidad" width="primera versión">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quality_scenarios">10.2. Quality Scenarios</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23.0769%;">
<col style="width: 23.0769%;">
<col style="width: 38.4615%;">
<col style="width: 15.3847%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ID</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>QA</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Scenario</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Priority</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must allow a player to start and quit a game without external help, within 3 minutes of opening the app, thanks to clear and simple interfaces.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users must be able to navigate between different game sections (settings, chat, etc.) in no more than 2 taps. It should take under 10 seconds for an average user.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q2.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The addition of new questions must be quick and simple without interrupting the application flow. It should take approximately 5 minutes, this entailing no downtime for the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q2.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must allow the implementation of new game models with minimal changes to the existing codebase, which should not take more than 1 hour. There should not be any regression in existing game functionality.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accessibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application must support screen readers for users with visual impairments, guaranteeing as well buttons and answers that are simple to read. All interactive elements must have alternative text, and the screen reader should process the entire game in under 30 seconds for each screen.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q4.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reliability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the system fails during a game, it should allow the user to resume the game from the last saved state. No more than 1 minute of progess should be lost.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q5.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Availability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must mantain 99.5% uptime over a month, including the peak usage period. Downtime must not overcome 3 hours and 39 minutes/month.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The product must respond to a player&#8217;s request in less than 0.5s.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application should give support to approximately 100 simultaneous request without significant downgrade in performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It must be ensured that player personal data (especially credentials) is encrypted, even if no sensitive data is handled. 0 data breaches must be admitted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must log all user actions related to account creation and gameplay. Unauthorized attempts to read private account information should trigger an alarm within 5 minutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compatibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The game should work correctly on both mobile and desktop devices, adjusting the dessign for different screen sizes, at least between 4"-27".</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compatibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must support the latest versions of popular browsers (Chrome, Safari, Firefox, etc.). It should be completely functional, with 0 visual/functional issues.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-technical-risks">11. Risks and Technical Debts</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Risk</th>
<th class="tableblock halign-left valign-top">Relevance</th>
<th class="tableblock halign-left valign-top">Considerations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limited expertise in specific tools or programming languages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The team may encounter difficulties due to varying levels of familiarity with required tools and languages. To address this, we will prioritize the use of well-known technologies within the team while encouraging knowledge-sharing and individual learning efforts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lack of prior collaboration within the team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since the team has not worked together before, there is a risk of inefficiencies in coordination. Establishing clear communication channels and regularly updating each other on progress will mitigate this issue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Large team size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A higher number of contributors can complicate communication and workflow synchronization. Implementing structured meetings and documentation processes should help maintain efficiency.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Potential delays in integrating external APIs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depending on external data sources, such as Wikidata, might introduce latency or downtime risks. Developing fallback mechanisms and caching strategies can help mitigate disruptions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Knowledge disparity among team members</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Some team members have prior experience, either from retaking the course or external knowledge, while others are learning these concepts for the first time. This can lead to uneven task distribution and communication gaps. Encouraging mentoring and pairing experienced members with those less familiar can help balance the workload and improve overall team efficiency.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_technical_debts">11.1. Technical Debts</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Technical Debt</th>
<th class="tableblock halign-left valign-top">Considerations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Game logic is handled on the frontend instead of the backend</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ideally, the game logic should reside on the backend to enhance security and maintainability. However, due to time constraints, it currently remains on the frontend. This introduces potential risks, as the logic can be easily bypassed or modified by users. Refactoring this component to the backend is planned for future iterations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Free MongoDB Atlas version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The free version of MongoDB Atlas has limitations on the number of connections and data storage. As the project scales, we may need to upgrade to a paid plan or consider alternative database solutions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The project is not fully e2e tested</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The project lacks comprehensive end-to-end tests at some points as LLM interactions or API requests, which can lead to undetected issues in the user experience. We plan to implement e2e tests in future iterations to ensure a more robust application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic Graphana and Prometheus configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current configuration of Graphana and Prometheus is basic, we must improve it to ensure effective monitoring and alerting. This includes setting up more detailed dashboards, alerts, and performance metrics to better understand the application&#8217;s behavior and performance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unable to update questions without restarting the server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Currently, updating questions requires redeploying the server. This is usefull now, when we are constantly updating and redeploying the aplications. But in the future, we should implement a more dynamic solution that allows for real-time updates to questions without requiring a server restart. This will improve the user experience.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-glossary">12. Glossary</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>LLM</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Large Language Model, a type of AI model that can generate human-like text.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Chatbot</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>It&#8217;s a computer programme that simulates human conversation with an end-user.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Framework</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>A framework is an outline that provides a basic structure for developing a project with specific objectives, a kind of template that serves as a starting point for the organisation and development of software.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Front-end</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Front-end includes drop-down menus, images, icons, colours, graphic elements, animations and everything related to improving the user&#8217;s browsing experience.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Back-end</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Back-end is responsible for the server, database and application logic.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Container</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>A container is a lightweight, standalone, executable package that includes everything needed to run a piece of software, including the code, runtime, libraries and system tools.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Database</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>A database is an organized collection of structured information or data, typically stored electronically in a computer system.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>API</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>APIs are mechanisms that allow two software components to communicate with each other through a set of definitions and protocols.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Wikidata</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>A structured, free knowledge database containing information on a wide range of topics. The application retrieves questions and answers from this source.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Question</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>A statement generated by the application based on Wikidata. Once generated, it is stored in the database for future retrieval. Users must provide an answer, with the option to request hints.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Answer</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>A response generated and stored along with the question. For each question, there is one correct answer and three incorrect ones. The answers are stored in the database and are presented to the user as part of the question for them to choose from.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Hint</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>A suggestion or help provided by the LLM to assist the user in answering a question. It is generated in response to a prompt created by us, using the information from the saved question.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Unit Tests</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Unit tests are used to test individual components of your code in isolation. They are typically small and fast, allowing you to run them frequently during development.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Code Coverage</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Code coverage is a measure of how much of your code is executed during tests. It helps identify untested parts of your code and can be used to improve test quality.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Security Hotspots</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Security hotspots are areas of your code that may be vulnerable to security issues. They are typically identified by static analysis tools and should be reviewed carefully.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>E2E Tests</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>End-to-end tests are used to test the entire application from start to finish. They simulate real user interactions and verify that the application behaves as expected.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Load tests</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Load tests are used to test the performance of your application under heavy load. They simulate multiple users interacting with the application simultaneously and measure response times and resource usage.</em></p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-testing">13. Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Testing is an important part of the development process. It helps ensure that your code works as expected and that changes do not introduce new bugs. In this section, we will cover the tests used in this project and some concepts related to testing.</p>
</div>
<div class="sect2">
<h3 id="_unit_tests_code_coverage_security_hotspots">13.1. Unit Tests, Code Coverage &amp; Security Hotspots</h3>
<div class="paragraph">
<p><span class="image"><img src="./images/QualityGate.PNG" alt="QualityGate"></span></p>
</div>
<div class="paragraph">
<p>We can observe that the code coverage is ~82%, which is above the threshold of 80% set in the quality gate. This means that the code is well-tested and meets the quality standards.
Also, 0.9% hotspots are presented, which means that the code does not contain any known big vulnerabilities.</p>
</div>
</div>
<div class="sect2">
<h3 id="_e2e_tests">13.2. E2E Tests</h3>
<div class="paragraph">
<p><span class="image"><img src="./images/e2e.PNG" alt="e2e"></span></p>
</div>
<div class="paragraph">
<p>We have a total of 15 E2E tests, which cover various scenarios and user interactions, like login, logout, signup, access the profile, access the ranking and play both Single Player and Player VS AI game modes with different configurations.</p>
</div>
<div class="paragraph">
<p>We try to cover all the possible scenarios that a user can encounter while using the application. Ensure all the code is covered is almost imposible, though.</p>
</div>
<div class="paragraph">
<p>These tests are run automatically as part of the CI/CD pipeline to ensure that the application works correctly after each change.</p>
</div>
</div>
<div class="sect2">
<h3 id="_load_tests">13.3. Load Tests</h3>
<div class="paragraph">
<p>We have done several tests to identify exactly the capacity that the app can support.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">10 Ramp Users</dt>
<dd>
<p>We can observe that the application can handle 10 ramp users without any issues. The response times are low, and the system performs well.
<span class="image"><img src="./images/gameflow_rampusers_10.PNG" alt="gameflow rampusers 10"></span></p>
</dd>
<dt class="hdlist1">50 Ramp Users</dt>
<dd>
<p>When we increase the number of ramp users to 50, we can see the questions service starts to fail.
<span class="image"><img src="./images/gameflow_rampusers_50.PNG" alt="gameflow rampusers 50"></span>
More than 50% of requests end in failure
<span class="image"><img src="./images/gameflow_rampusers_50_details_getQuestions.PNG" alt="gameflow rampusers 50 details getQuestions"></span></p>
</dd>
<dt class="hdlist1">2000 Ramp Users</dt>
<dd>
<p>When we increase the number of ramp users to 2000, we can see that now the questions service fails every time. But the other services are still able to handle the load.
<span class="image"><img src="./images/gameflow_rampusers_2000.PNG" alt="gameflow rampusers 2000"></span></p>
</dd>
<dt class="hdlist1">2200 Ramp Users</dt>
<dd>
<p>When we increase the number of ramp users to 2200, we can see that other services start to fail as well. The system is unable to handle the load, and response times increase significantly.
<span class="image"><img src="./images/info1.png" alt="info1"></span>
<span class="image"><img src="./images/info2.png" alt="info2"></span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>So this is where we&#8217;re going to stop and look at the graphs we get from the test results:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Active users throughout the simulation</dt>
<dd>
<p><span class="image"><img src="./images/grafica1.png" alt="grafica1"></span></p>
<div class="ulist">
<ul>
<li>
<p>The rapid increase to ~2,000 users is observed, load maintenance and gradual decline at the end of the test.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Distribution of response times</dt>
<dd>
<p><span class="image"><img src="./images/grafica2.png" alt="grafica2"></span>
Two main peaks stand out:</p>
<div class="ulist">
<ul>
<li>
<p>Fast responses (~300 ms)</p>
</li>
<li>
<p>Timeout responses (far right, ~60,000 ms)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Response time percentiles (OK)</dt>
<dd>
<p><span class="image"><img src="./images/grafica3.png" alt="grafica3"></span></p>
<div class="ulist">
<ul>
<li>
<p>A pattern is observed where times initially increase and then stabilize.</p>
</li>
<li>
<p>There is a noticeable spike around 11:39:00 where even the fastest responses degraded, which could be due to many factors.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Number of requests per second</dt>
<dd>
<p><span class="image"><img src="./images/grafica4.png" alt="grafica4"></span></p>
<div class="ulist">
<ul>
<li>
<p>Initial peak of ~180 requests/second.</p>
</li>
<li>
<p>Later stabilization around 50-100 requests/second.</p>
</li>
<li>
<p>Direct correlation between the number of active users and the volume of requests.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Number of responses per second</dt>
<dd>
<p><span class="image"><img src="./images/grafica5.png" alt="grafica5"></span></p>
<div class="ulist">
<ul>
<li>
<p>An initial spike in traffic is observed around 11:37:00, with over 100 responses/second, followed by a plateau. The green-to-red ratio indicates a significant number of errors throughout the test.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These graphs reveal that the system experiences significant degradation under load, with specific points of failure at certain endpoints and response times deteriorating markedly as concurrency increases.</p>
</div>
<div class="paragraph">
<p>Furthermore, we can also conclude that the question service acts as a bottleneck in the application.</p>
</div>
<div class="paragraph">
<p>On the other hand, we see that in addition to the question service, the LLM begins to cause problems starting at about 750 users, as shown in the following table:
<span class="image"><img src="./images/llm_rampusers_750.PNG" alt="llm rampusers 750"></span>
* The request_1 represents the OPTIONS request, while the request_2 represents the POST request.</p>
</div>
</div>
<div class="sect2">
<h3 id="_improvements">13.4. Improvements</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>After obtaining this data and reviewing what the problem could be, we found that with each request to the '/questionsDB' endpoint, a new connection to the database was created, which obviously slowed down the response time significantly.</p>
</div>
<div class="paragraph">
<p>After solving this problem, we can see that, although slow, 1000 users are handled without problems.
<span class="image"><img src="./images/updatedEndpointQuestions_rampUsers_1000.PNG" alt="updatedEndpointQuestions rampUsers 1000"></span></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.2 EN<br>
Last updated 2025-05-04 20:11:57 +0200
</div>
</div>
</body>
</html>